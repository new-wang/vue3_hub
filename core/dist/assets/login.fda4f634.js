import{_ as v,r as V,a as w,c as y,t as b,b as c,o as C,d as k,e as a,w as s,f as m,g as u,h as E,i as I,u as T,E as q,p as S,j as N}from"./index.6a9140fe.js";import{l as R,c as U,_ as B}from"./vite.152151df.js";import{s as K}from"./request.c5f95f99.js";function D(e){return K({url:"/util/sendcode",method:"get",params:e})}const{url:g}=U,F="USER_TOKEN",L={setup(){const e=T(),t=V(),f={email:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u683C\u5F0F"}],captcha:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],emailcode:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u9A8C\u8BC1\u7801"}],password:[{required:!0,pattern:/^[\w_-]{6,12}$/g,message:"\u8BF7\u8F93\u51656~12\u4F4D\u5BC6\u7801"}]},o=w({form:{email:"1039445602@qq.com",captcha:"",emailcode:"",password:""},code:{captcha:g+"/util/captcha"},send:{timer:0}}),_=d=>{o.code.captcha=g+"/util/captcha?_t"+new Date().getTime()},h=async()=>{await D({email:o.form.email}),o.send.timer=10,o.timer=setInterval(()=>{o.send.timer-=1,o.send.timer===0&&clearInterval(o.timer)},1e3)},n=async d=>{t.value.validate(async p=>{if(p){let i=await R(o.form);i&&i.code==0&&(q.success("\u767B\u9646\u6210\u529F"),localStorage.setItem(F,i.data.token),setTimeout(()=>{e.push("/")},500))}})},r=y(()=>o.send.timer<=0?"\u53D1\u9001":`${o.send.timer}s\u540E\u53D1\u9001`);return{...b(o),resetCaptcha:_,sendEmailCode:h,sendText:r,rules:f,handleLogin:n,loginFormRef:t}}},M=e=>(S("data-v-6155e36f"),e=e(),N(),e),O={class:"login-container"},j=M(()=>m("div",{class:"title-container"},[m("img",{src:B,class:"logo",alt:"Vite logo"})],-1)),Y={class:"captcha"},$=["src"],z={class:"captcha"},A=u("\u767B\u5F55"),G=u("\u6CE8\u518C");function H(e,t,f,o,_,h){const n=c("el-input"),r=c("el-form-item"),d=c("el-button"),p=c("router-link"),i=c("el-form");return C(),k("div",O,[a(i,{class:"login-form",ref:"loginFormRef","label-width":"100px",rules:o.rules,model:e.form},{default:s(()=>[j,a(r,{prop:"email",label:"\u90AE\u7BB1"},{default:s(()=>[a(n,{modelValue:e.form.email,"onUpdate:modelValue":t[0]||(t[0]=l=>e.form.email=l),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1}),a(r,{prop:"captcha",label:"\u9A8C\u8BC1\u7801",class:"captcha-container"},{default:s(()=>[m("div",Y,[m("img",{src:e.code.captcha,onClick:t[1]||(t[1]=(...l)=>o.resetCaptcha&&o.resetCaptcha(...l))},null,8,$)]),a(n,{modelValue:e.form.captcha,"onUpdate:modelValue":t[2]||(t[2]=l=>e.form.captcha=l),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"])]),_:1}),a(r,{prop:"emailcode",label:"\u9A8C\u8BC1\u7801",class:"captcha-container"},{default:s(()=>[m("div",z,[a(d,{onClick:o.sendEmailCode,disabled:e.send.timer>0,type:"primary"},{default:s(()=>[u(E(o.sendText),1)]),_:1},8,["onClick","disabled"])]),a(n,{modelValue:e.form.emailcode,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.emailcode=l),placeholder:"\u8BF7\u8F93\u5165\u90AE\u4EF6\u9A8C\u8BC1\u7801"},null,8,["modelValue"])]),_:1}),a(r,{prop:"password",label:"\u5BC6\u7801"},{default:s(()=>[a(n,{modelValue:e.form.password,"onUpdate:modelValue":t[4]||(t[4]=l=>e.form.password=l),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),a(r,{label:" ",class:"form-btn"},{default:s(()=>[a(d,{type:"primary",onClick:I(o.handleLogin,["prevent"])},{default:s(()=>[A]),_:1},8,["onClick"]),a(p,{to:"/register"},{default:s(()=>[a(d,{type:"primary"},{default:s(()=>[G]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])])}const W=v(L,[["render",H],["__scopeId","data-v-6155e36f"]]);export{W as default};
