import{a as b,t as v,r as y,b as p,o as x,d as C,e as a,w as r,n as t,f as c,i as q,g as B,u as R,l as U}from"./index.6a9140fe.js";import{_ as E,c as N,r as T}from"./vite.152151df.js";import"./request.c5f95f99.js";const F={class:"login-container"},M=c("div",{class:"title-container"},[c("img",{src:E,alt:"logo"})],-1),D={class:"captcha"},$=["src"],j=B("\u6CE8\u518C"),I={__name:"register",setup(z){const{url:m}=N,f=R(),d=b({form:{email:"",captcha:"",password:"",repasswd:"",nickname:""},code:{captcha:m+"/util/captcha"},send:{timer:0},rules:{email:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u683C\u5F0F"}],captcha:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],nickname:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0"}],passwd:[{required:!0,pattern:/^[\w_-]{6,12}$/g,message:"\u8BF7\u8F93\u51656~12\u4F4D\u5BC6\u7801"}],repasswd:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"},{validator:(i,e,s)=>{e!==d.form.password&&s(new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4")),s()}}]}}),{form:l,code:_,rules:g}={...v(d)},w=()=>{d.code.captcha=m+"/util/captcha?_t"+new Date().getTime()},u=y(),h=async()=>{u.value.validate(async i=>{i&&(await T(d.form)).code==0&&U.alert("\u6CE8\u518C\u6210\u529F","\u6210\u529F",{confirmButtonText:"\u53BB\u767B\u5F55",callback:()=>{f.push("/login")}})})};return(i,e)=>{const s=p("el-input"),n=p("el-form-item"),V=p("el-button"),k=p("el-form");return x(),C("div",F,[a(k,{class:"login-form","label-width":"100px",model:t(l),rules:t(g),ref_key:"registerFormRef",ref:u},{default:r(()=>[M,a(n,{prop:"email",label:"\u90AE\u7BB1"},{default:r(()=>[a(s,{modelValue:t(l).email,"onUpdate:modelValue":e[0]||(e[0]=o=>t(l).email=o),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1}),a(n,{prop:"captcha",label:"\u9A8C\u8BC1\u7801",class:"captcha-container"},{default:r(()=>[c("div",D,[c("img",{src:t(_).captcha,onClick:w},null,8,$)]),a(s,{modelValue:t(l).captcha,"onUpdate:modelValue":e[1]||(e[1]=o=>t(l).captcha=o),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"])]),_:1}),a(n,{prop:"nickname",label:"\u6635\u79F0"},{default:r(()=>[a(s,{modelValue:t(l).nickname,"onUpdate:modelValue":e[2]||(e[2]=o=>t(l).nickname=o),placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0"},null,8,["modelValue"])]),_:1}),a(n,{prop:"password",label:"\u5BC6\u7801"},{default:r(()=>[a(s,{type:"password",modelValue:t(l).password,"onUpdate:modelValue":e[3]||(e[3]=o=>t(l).password=o),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),a(n,{prop:"repasswd",label:"\u786E\u8BA4\u5BC6\u7801"},{default:r(()=>[a(s,{type:"password",modelValue:t(l).repasswd,"onUpdate:modelValue":e[4]||(e[4]=o=>t(l).repasswd=o),placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),a(n,{label:" "},{default:r(()=>[a(V,{type:"primary",onClick:q(h,["prevent"])},{default:r(()=>[j]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])])}}};export{I as default};
